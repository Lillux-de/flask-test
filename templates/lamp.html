{% extends "base.html" %}

{% block scripts %}
    <script src="{{ url_for('static', filename='js/iro.min.js') }}"></script>
    <script>
        var colorPicker = new iro.ColorPicker('#colorpicker', {
            layout: [
                { component: iro.ui.Wheel, options: {} }
            ]
        });
//        colorPicker.ui.slice(1, 1);
        colorPicker.on('color:change', function(color) {
            // log the current color as a HEX string
            console.log(color.rgba);
            //POST to Server. TODO: limit ajax post requests!!
            $.ajax({
                url: '{{ url_for('lamp', lampid=lamp) }}',
                data: color.rgba,
                type: 'POST',
//                contentType: 'application/json;charset=UTF-8',
                success: function(response) {
                    console.log(response);
                },
                error: function(error) {
                    console.log("FEHLER!");
                    console.log(error);
                }
            });
        });
    </script>
{% endblock %}


{% block navbar %}
    <li class="nav-item active">
        <a class="nav-link" href="#">Lamp</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="{{url_for('dashboard') }}">Dashboard</a>
    </li>
{% endblock %}


{% block content %}
    <div class="row">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header"> Pick the Color </div>
                <div class="card-body" id="colorpicker"></div>
            </div>
        </div>

        <div class="col-md-6" name="other controls">
            <div class="card">
                <div class="card-header">Brightness</div>
                <div class="card-body row">
                    <input class="col" type="range" min="1" max="100" value="90" id="brightness">
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">Create a Flow</div>
                <div class="card-body">
                    <div class="row">
                        <button type="button" class="col btn btn-outline-primary">First</button>
                        <button type="button" class="col btn btn-outline-primary">Second</button>
                        <button type="button" class="col btn btn-outline-primary">Third</button>
                        <button type="button" class="col btn btn-outline-primary">Fourth</button>
                    </div>
                    <div class="row">
                        <button type="button" class="col btn btn-primary">Create Flow</button>
                    </div>
                </div>
            </div>
        </div>

    </div>
{% endblock %}